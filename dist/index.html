<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Project</title>
    <link rel="stylesheet" href="main.css">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <!-- <script src="../src/globe.js" defer></script> -->
    
</head>
<body>
    <div id="app"></div>
    <div class="search-container">
        <form action="#">
            <input class="text-input" type="text" placeholder="" name="search">
            <button type="submit">See Artist Tour History</button>
        </form>
    </div>


<!-- slider     -->
<div class="mainslider">
    <input class="year-slide" type="range" min="2010" max="2020" value="2015" step="1">
    <div class="selector">
        <div class="selectbutton"></div>
        <div class="selectvalue"></div>
        <span id="slider-current-year" style="left: calc((55.5556% + 12.5px) - 19.5px);">2015</span>
    </div>
</div>


<ul id="event-data"></ul>

<!-- globe -->

    <div class="globe">
        <body>
            <div id="content">
                <canvas width="900" height="900"></canvas>
            </div>
            

            <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
            
            <script>
                var geojson = {}

                var context = d3.select('#content canvas')
                    .node()
                    .getContext('2d');

                    
                var projection = d3.geoOrthographic()
                    .scale(250);
                
                var geoGenerator = d3.geoPath()
                    .projection(projection)
                    .pointRadius(4)
                    .context(context);
                
                var yaw = 300;

                function update() {
                    projection.rotate([yaw, -20])

                    context.clearRect(0, 0, 800, 600);

                    context.lineWidth = 0.8;
                    context.strokeStyle = '#333';

                    context.beginPath();
                    geoGenerator({ type: 'FeatureCollection', features: geojson.features })
                    context.stroke();

                    // Graticule
                    yaw -= 0.5
                    
                    var graticule = d3.geoGraticule();
                    context.beginPath();
                    context.strokeStyle = '#ABB2B9';
                    geoGenerator(graticule());
                    context.stroke();

                }



                // REQUEST DATA
                // d3.json("/Users/isabella/Desktop/JS/data/custom.geo.json", function (err, json) {
                d3.json("https://gist.githubusercontent.com/d3indepth/f28e1c3a99ea6d84986f35ac8646fac7/raw/c58cede8dab4673c91a3db702d50f7447b373d98/ne_110m_land.json", function (err, json) {
                    geojson = json;
                    window.setInterval(update, 100);
                })

          
            </script>

    </div>


</body>
<script src="main.js" ></script>


<script src="../src/search_bar.js"></script>
</html>


